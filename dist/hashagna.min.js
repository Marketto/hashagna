define(["exports"],function(e){"use strict";var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,a,u,s){return new(u||(u=Promise))(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function i(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof u?t:new u(function(e){e(t)})).then(r,i)}o((s=s.apply(e,a||[])).next())})}function b(n,r){var i,o,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var v=function(){function e(){}return e.deserializeParams=function(e){var a=this;return(e||"").replace(/^(?:#|\?)/,"").split("&").reduce(function(e,t){var n,r=s(t.split("="),2),i=r[0],o=r[1];return u(u({},e),((n={})[i.trim()]=a.deserializeValue(o),n))},{})},e.deserializeValue=function(e){var t=(e||"").trim();return""===t?null:/^(?:true|false)$/i.test(t)?/^true$/i.test(t):t===parseFloat(t).toString()?parseFloat(t):t},e.serializeParams=function(e){var i=this;return Object.entries(e||{}).map(function(e){var t=s(e,2),n=t[0],r=t[1];return n+"="+i.serializeValue(r)}).join("&")},e.serializeValue=function(e){return null==e?"":e instanceof Date?e.toJSON():["boolean","number","string"].includes(typeof e)?e.toString():""},e}(),c=function(){function e(){}return e.newIframe=function(){return n(this,void 0,void 0,function(){var t,n;return b(this,function(e){switch(e.label){case 0:return t=this.newId(),(n=document.createElement("iframe")).setAttribute("style","display: none"),n.setAttribute("id",t),window.document.body.appendChild(n),[4,this.isDomElementReady(function(){return document.getElementById(t)})];case 1:return[2,e.sent()]}})})},e.isDomElementReady=function(r){return n(this,void 0,void 0,function(){var t,n=this;return b(this,function(e){switch(e.label){case 0:return(t=r())?[3,2]:[4,new Promise(function(e){return window.requestAnimationFrame(function(){return n.isDomElementReady(r).then(e)})})];case 1:return[2,e.sent()];case 2:return[2,t]}})})},e.iframeListenerInjector=function(m){var e=this;return new Promise(function(h,d){m.onload=function(){return n(e,void 0,void 0,function(){var t,n,r,i,o,a,u,s,c,l,f;return b(this,function(e){switch(e.label){case 0:return[4,this.isDomElementReady(function(){return m.contentWindow})];case 1:return(t=e.sent())&&t.location&&t.location.hash?(n=t.location,r=n.hash,i=n.host,o=n.hostname,a=n.href,u=n.origin,s=n.pathname,c=n.port,l=n.protocol,f=n.search,[2,h({hash:r,hashParams:v.deserializeParams(r),host:i,hostname:o,href:a,origin:u,pathname:s,protocol:l,search:f,port:c,query:v.deserializeParams(f)})]):[2,d(new Error("No hash params found"))]}})})}})},e.newId=function(){return Math.random().toString(36).substring(2)},e.iFrameFormSubmit=function(r,i,u){return n(this,void 0,void 0,function(){var o,t,a,n;return b(this,function(e){switch(e.label){case 0:return[4,this.isDomElementReady(function(){return r.contentDocument})];case 1:return o=e.sent(),[4,this.isDomElementReady(function(){return o.documentElement})];case 2:return(t=e.sent()).innerHTML="",a=o.createElement("form"),n=this.newId(),Object.entries({method:"post",action:i,id:n}).forEach(function(e){var t=s(e,2),n=t[0],r=t[1];return a.setAttribute(n,r)}),Object.entries(u).forEach(function(e){var t=s(e,2),n=t[0],r=t[1],i=o.createElement("input");i.setAttribute("name",n),i.setAttribute("value",v.serializeValue(r)),a.appendChild(i)}),t.appendChild(a),[4,this.isDomElementReady(function(){return o.getElementById(n)})];case 3:return e.sent(),a.submit(),[2]}})})},e}(),t=function(){function e(){}return e.getIFrame=function(t){return n(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return t?[4,c.isDomElementReady(function(){return document.getElementById(t)})]:[3,2];case 1:return[2,e.sent()];case 2:return[4,c.newIframe()];case 3:return[2,e.sent()]}})})},e.initIFrame=function(a){return n(this,void 0,void 0,function(){var r,t,n,i,o;return b(this,function(e){switch(e.label){case 0:return(t=a&&a.iFrame)?[3,2]:[4,this.getIFrame(a?a.iFrameId:void 0)];case 1:t=e.sent(),e.label=2;case 2:return(n=(r=t).hasAttribute("disabled"))&&r.removeAttribute("disabled"),i=a&&(a.iFrame||a.iFrameId)?a&&a.autoClean?function(){n&&r.setAttribute("disabled",""),c.isDomElementReady(function(){return r.contentWindow&&r.contentWindow.document.getElementsByTagName("body")[0]}).then(function(e){return e.innerHTML=""})}:function(){n&&r.setAttribute("disabled","")}:function(){return r.remove()},o=new Promise(function(t,n){c.iframeListenerInjector(r).then(function(e){t(e),i()}).catch(function(e){n(e),i()})}),[2,{iFrame:r,listener:o}]}})})},e.get=function(i,o,a){return n(this,void 0,void 0,function(){var t,n,r;return b(this,function(e){switch(e.label){case 0:return[4,this.initIFrame(a)];case 1:return t=e.sent(),n=t.iFrame,r=t.listener,n.src=i+"?"+v.serializeParams(o),[4,r];case 2:return[2,e.sent()]}})})},e.post=function(i,o,a){return n(this,void 0,void 0,function(){var t,n,r;return b(this,function(e){switch(e.label){case 0:return[4,this.initIFrame(a)];case 1:return t=e.sent(),n=t.iFrame,r=t.listener,[4,c.iFrameFormSubmit(n,i,o)];case 2:return e.sent(),[4,r];case 3:return[2,e.sent()]}})})},e}();e.HashagnaHttpClient=t,e.HashagnaUtils=c,e.default=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=hashagna.min.js.map
