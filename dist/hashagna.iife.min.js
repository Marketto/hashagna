var hashagna=function(t){"use strict";var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,o,u,s){return new(u||(u=Promise))(function(n,e){function r(t){try{a(s.next(t))}catch(t){e(t)}}function i(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof u?e:new u(function(t){t(e)})).then(r,i)}a((s=s.apply(t,o||[])).next())})}function v(n,r){var i,a,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(o=2&e[0]?a.return:e[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,e[1])).done)return o;switch(a=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}var b=function(){function t(){}return t.deserializeParams=function(t){var o=this;return(t||"").replace(/^(?:#|\?)/,"").split("&").reduce(function(t,e){var n,r=s(e.split("="),2),i=r[0],a=r[1];return u(u({},t),((n={})[i.trim()]=o.deserializeValue(a),n))},{})},t.deserializeValue=function(t){var e=(t||"").trim();return""===e?null:/^(?:true|false)$/i.test(e)?/^true$/i.test(e):e===parseFloat(e).toString()?parseFloat(e):e},t.serializeParams=function(t){var i=this;return Object.entries(t||{}).map(function(t){var e=s(t,2),n=e[0],r=e[1];return n+"="+i.serializeValue(r)}).join("&")},t.serializeValue=function(t){return null==t?"":t instanceof Date?t.toJSON():["boolean","number","string"].includes(typeof t)?t.toString():""},t}(),c=function(){function t(){}return t.newIframe=function(){return n(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=this.newId(),(n=document.createElement("iframe")).setAttribute("style","display: none"),n.setAttribute("id",e),window.document.body.appendChild(n),[4,this.isDomElementReady(function(){return document.getElementById(e)})];case 1:return[2,t.sent()]}})})},t.isDomElementReady=function(r){return n(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return(e=r())?[3,2]:[4,new Promise(function(t){return window.requestAnimationFrame(function(){return n.isDomElementReady(r).then(t)})})];case 1:return[2,t.sent()];case 2:return[2,e]}})})},t.iframeListenerInjector=function(d){var t=this;return new Promise(function(h,m){d.onload=function(){return n(t,void 0,void 0,function(){var e,n,r,i,a,o,u,s,c,l,f;return v(this,function(t){switch(t.label){case 0:return[4,this.isDomElementReady(function(){return d.contentWindow})];case 1:return(e=t.sent())&&e.location&&e.location.hash?(n=e.location,r=n.hash,i=n.host,a=n.hostname,o=n.href,u=n.origin,s=n.pathname,c=n.port,l=n.protocol,f=n.search,[2,h({hash:r,hashParams:b.deserializeParams(r),host:i,hostname:a,href:o,origin:u,pathname:s,protocol:l,search:f,port:c,query:b.deserializeParams(f)})]):[2,m(new Error("No hash params found"))]}})})}})},t.newId=function(){return Math.random().toString(36).substring(2)},t.iFrameFormSubmit=function(r,i,u){return n(this,void 0,void 0,function(){var a,e,o,n;return v(this,function(t){switch(t.label){case 0:return[4,this.isDomElementReady(function(){return r.contentDocument})];case 1:return a=t.sent(),[4,this.isDomElementReady(function(){return a.documentElement})];case 2:return(e=t.sent()).innerHTML="",o=a.createElement("form"),n=this.newId(),Object.entries({method:"post",action:i,id:n}).forEach(function(t){var e=s(t,2),n=e[0],r=e[1];return o.setAttribute(n,r)}),Object.entries(u).forEach(function(t){var e=s(t,2),n=e[0],r=e[1],i=a.createElement("input");i.setAttribute("name",n),i.setAttribute("value",b.serializeValue(r)),o.appendChild(i)}),e.appendChild(o),[4,this.isDomElementReady(function(){return a.getElementById(n)})];case 3:return t.sent(),o.submit(),[2]}})})},t}(),e=function(){function t(){}return t.getIFrame=function(e){return n(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?[4,c.isDomElementReady(function(){return document.getElementById(e)})]:[3,2];case 1:return[2,t.sent()];case 2:return[4,c.newIframe()];case 3:return[2,t.sent()]}})})},t.initIFrame=function(o){return n(this,void 0,void 0,function(){var r,e,n,i,a;return v(this,function(t){switch(t.label){case 0:return(e=o&&o.iFrame)?[3,2]:[4,this.getIFrame(o?o.iFrameId:void 0)];case 1:e=t.sent(),t.label=2;case 2:return(n=(r=e).hasAttribute("disabled"))&&r.removeAttribute("disabled"),i=o&&(o.iFrame||o.iFrameId)?o&&o.autoClean?function(){n&&r.setAttribute("disabled",""),c.isDomElementReady(function(){return r.contentWindow&&r.contentWindow.document.getElementsByTagName("body")[0]}).then(function(t){return t.innerHTML=""})}:function(){n&&r.setAttribute("disabled","")}:function(){return r.remove()},a=new Promise(function(e,n){c.iframeListenerInjector(r).then(function(t){e(t),i()}).catch(function(t){n(t),i()})}),[2,{iFrame:r,listener:a}]}})})},t.get=function(i,a,o){return n(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return[4,this.initIFrame(o)];case 1:return e=t.sent(),n=e.iFrame,r=e.listener,n.src=i+"?"+b.serializeParams(a),[4,r];case 2:return[2,t.sent()]}})})},t.post=function(i,a,o){return n(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return[4,this.initIFrame(o)];case 1:return e=t.sent(),n=e.iFrame,r=e.listener,[4,c.iFrameFormSubmit(n,i,a)];case 2:return t.sent(),[4,r];case 3:return[2,t.sent()]}})})},t}();return t.HashagnaHttpClient=e,t.HashagnaUtils=c,t.default=e,window.HashagnaHttpClient=t.HashagnaHttpClient,t}({});
//# sourceMappingURL=hashagna.iife.min.js.map
